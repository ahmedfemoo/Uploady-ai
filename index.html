<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Uploady AI</title>

  <!-- Pi SDK (مرة واحدة فقط) -->
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>

  <script>
    // تأكد إن الصفحة اتحمّلت
    document.addEventListener("DOMContentLoaded", function () {

      if (typeof Pi === "undefined") {
        alert("Pi SDK NOT loaded");
        return;
      }

      // Initialize Pi (مرة واحدة)
      Pi.init({
        version: "2.0",
        sandbox: true
      });

      console.log("Pi SDK initialized");
    });

    // دالة Login واحدة فقط
    function loginWithPi() {
      Pi.authenticate(
        ["username"],
        function (auth) {
          console.log(auth);
          alert("Welcome " + auth.user.username);
        },
        function (error) {
          console.error(error);
          alert("Authentication failed");
        }
      );
    }
  </script>
</head>

<body>
  <h2>Uploady AI</h2>

  <!-- زرار واحد فقط -->
  <button onclick="loginWithPi()">
    Login with Pi
  </button>
</body>
</html>
